BOXREC DATA PIPELINE OVERVIEW
=============================

┌─────────────────┐
│   BoxRec.com    │  ← Source Website
│  (Boxing Data)  │
└────────┬────────┘
         │ HTTP/Scrape
         ▼
┌─────────────────┐
│  Web Scraper    │  ← scrape_to_db.py
│  (Zyte API)     │    Rate limited, validates HTML
└────────┬────────┘
         │ Validate & Save
         ▼
┌─────────────────┐
│  PostgreSQL DB  │  ← staging.boxrec_html
│  HTML Storage   │    staging.bout_html
│  (Validated)    │    Stores raw HTML + metadata
└────────┬────────┘
         │ Read & Parse
         ├──────────────────┐
         │                  │
         ▼                  ▼
┌─────────────────┐  ┌─────────────────┐
│ URL Extractors  │  │  HTML Parser    │  ← parse_boxer_v2.py
│                 │  │   (v2.0.0)      │    Extract 40+ fields
├─────────────────┤  │                 │    Opponent linking
│ extract_opponent│  └────────┬────────┘
│    _urls.py     │           │
├─────────────────┤           │
│ extract_bout    │           │
│    _urls.py     │           │
└─────────────────┘           │
         │                    │
         ▼                    ▼
┌─────────────────┐  ┌─────────────────┐
│  New URL Lists  │  │ Individual JSON │  ← data/raw/boxrec_json_v2/
│                 │  │   Per Boxer     │    One JSON per boxer
├─────────────────┤  │  (Validated)    │    Schema v2.0.0
│ • opponent_urls │  └────────┬────────┘
│ • bout_urls.csv │           │
└─────────────────┘           │
         │ Process
         ▼
┌─────────────────┐
│ Data Processor  │  ← Migration scripts
│  & Migrations   │    v1 → v2 transforms
│                 │    Field mapping
└────────┬────────┘
         │ Transform
         ▼
┌─────────────────┐
│ Processed JSON  │  ← data/processed/v2/
│   (Clean)       │    Normalized data
│                 │    Ready to combine
└────────┬────────┘
         │ Combine
         ▼
┌─────────────────┐
│ Data Combiner   │  ← combine_boxer_json_v2.py
│   (Filters)     │    Aggregate all boxers
│                 │    Apply filters
└────────┬────────┘
         │ Output
         ▼
┌─────────────────┐
│ Combined Dataset│  ← outputs/v2/combined_boxers.json
│  (Single JSON)  │    All boxers in one file
│   + Summary     │    Ready for frontend
└────────┬────────┘
         │
         ├─────────────────┐ Current Path
         │                 ▼
         │        ┌─────────────────┐
         │        │   Nuxt.js App   │
         │        │ (Direct Import) │
         │        └─────────────────┘
         │
         └─────────────────┐ Future Path
                           ▼
                  ┌─────────────────┐
                  │  Staging DB     │  ← PostgreSQL/SQLite
                  │ (Drizzle ORM)   │    Structured tables
                  └────────┬────────┘
                           │ API
                           ▼
                  ┌─────────────────┐
                  │   REST API      │  ← Fast queries
                  │  (Endpoints)     │    Filtering
                  └────────┬────────┘
                           │ HTTP/JSON
                           ▼
                  ┌─────────────────┐
                  │   Nuxt.js App   │  ← Boxing website
                  │  (Frontend)      │    Boxer profiles
                  └─────────────────┘    Fight history


KEY FEATURES
============

1. PRESERVATION: Raw HTML saved for reprocessing
2. VALIDATION: JSON Schema ensures data quality  
3. VERSIONING: Schema versions with migrations
4. LINKING: Opponent IDs enable fight networks
5. SCALABLE: Ready for 10,000+ boxers

CURRENT STATS
=============
• 99 boxers processed
• ~3,000 fights tracked
• 40+ fields per boxer
• 15+ fields per fight
• Schema version 2.0.0

FILE STRUCTURE
==============
boxrec_scraper/
├── data/
│   ├── raw/
│   │   ├── boxrec_html/     # Source HTML
│   │   └── boxrec_json_v2/  # Parsed JSON
│   ├── processed/
│   │   └── v2/              # Clean data
│   ├── bad_scrapes.csv      # Failed scrapes list
│   └── urls_to_rescrape.csv # URLs needing retry
├── outputs/
│   └── v2/                  # Final datasets
├── scripts/                 # Processing tools
│   ├── scrape_boxers.py     # Main scraper
│   ├── validate_scrapes.py  # Quality checker
│   └── parse_boxer_v2.py    # HTML parser
├── schema/                  # JSON schemas
└── migrations/              # Version upgrades